# GitHub Copilot Instructions

## Project Overview

This is a **Gorillas Browser Clone** project built with **Phaser.io** (version 3.90.0) as a hard commitment. The game engine choice is non-negotiable and all game development must utilize Phaser 3 APIs and patterns.

**CRITICAL: This project follows Test-Driven Development (TDD) methodology. NO CODE should be written for any feature until comprehensive tests are written first.**

## Project Structure & Documentation Standards

### Core Technology Stack
- **Game Engine**: Phaser.io 3.90.0 (MANDATORY - no alternatives)
- **Language**: TypeScript 5.7.2
- **Build Tool**: Vite 6.3.1
- **Framework**: Phaser 3 game framework
- **Testing**: Jest for unit tests, Playwright for E2E UX testing
- **Development Methodology**: Test-Driven Development (TDD) - MANDATORY

### Documentation Structure

#### `/docs` - Documentation Folder
All project documentation must be stored in markdown format within the `/docs` folder:
- Technical specifications
- API documentation
- Game design documents
- Development guides
- Architecture decisions
- User guides
- Installation instructions
- Testing strategy and guidelines

#### `/plan` - Project Planning Folder
All project planning and task management files must be stored in the `/plan` folder:
- `plan.md` - Main project plan and roadmap
- `task-01.md`, `task-02.md`, etc. - Individual task specifications in markdown format
- Sprint planning documents
- Feature specifications
- Milestone tracking

#### `/tests` - Testing Structure
- `/tests/unit` - Jest unit tests for game logic and systems
- `/tests/e2e` - Playwright E2E tests for user experience
- `/tests/fixtures` - Test data and mock objects
- `/tests/utils` - Testing utilities and helpers

### Test-Driven Development (TDD) Requirements

#### TDD Workflow (MANDATORY)
1. **Red**: Write failing tests for the feature FIRST
2. **Green**: Write minimal code to make tests pass
3. **Refactor**: Improve code while keeping tests green
4. **Repeat**: Continue cycle for each feature/requirement

#### Testing Standards
- **Unit Tests**: Every game system, class, and function must have unit tests
- **E2E Tests**: Every user interaction and game flow must have Playwright tests
- **Test Coverage**: Minimum 90% code coverage required
- **Test First**: NO production code without corresponding tests
- **Continuous Testing**: Tests run on every commit/build

#### Phaser.io Testing Approach
- Mock Phaser objects for unit testing game logic
- Use Playwright for testing actual game interactions
- Test game state transitions and physics calculations
- Verify visual elements and user interactions
- Test cross-browser compatibility

### Development Guidelines

#### Phaser.io Commitment
- ALL game logic must use Phaser 3 APIs
- Follow Phaser 3 best practices and patterns
- Utilize Phaser scenes, game objects, and systems
- Leverage Phaser's physics, input, and audio systems
- Use Phaser's asset loading and management

#### Code Standards
- Use TypeScript for all source code
- Follow existing project structure in `/src`
- Maintain scene-based architecture
- Use proper Phaser lifecycle methods (preload, create, update)
- Write testable, modular code with dependency injection

#### File Organization
- Game scenes in `/src/game/scenes`
- Assets in `/public/assets`
- Main game configuration in `/src/game/main.ts`
- Test files mirror source structure

## Development Workflow

When working on this project:

1. **Planning**: Create or update task files in `/plan` folder
2. **Test Design**: Write comprehensive test specifications FIRST
3. **Test Implementation**: Implement failing tests (Red phase)
4. **Code Implementation**: Write minimal code to pass tests (Green phase)
5. **Refactoring**: Improve code quality while maintaining passing tests
6. **Documentation**: Update relevant docs in `/docs` folder
7. **Integration**: Ensure all tests pass before committing

## Testing Strategy

### Unit Testing with Jest
- Test game logic, physics calculations, and state management
- Mock Phaser objects to test game systems in isolation  
- Test utility functions and helper classes
- Verify collision detection algorithms and game rules

### E2E Testing with Playwright
- Test complete user journeys (menu → game → victory)
- Verify keyboard controls and input validation
- Test game visual elements and animations
- Cross-browser compatibility testing
- Performance and responsiveness testing

### Test Categories Required
- **Smoke Tests**: Basic functionality works
- **Integration Tests**: Systems work together correctly
- **User Journey Tests**: Complete gameplay flows
- **Edge Case Tests**: Handle invalid inputs and error conditions
- **Performance Tests**: Frame rate and responsiveness
- **Accessibility Tests**: Keyboard navigation and usability

## Key Reminders

- **TDD is MANDATORY** - Write tests first, then implementation
- **Phaser.io is the committed game engine** - do not suggest alternatives
- All documentation goes in `/docs` as markdown files
- All planning goes in `/plan` as markdown files
- All tests go in `/tests` with proper organization
- Follow TypeScript and Phaser 3 best practices
- Maintain the existing Vite + TypeScript + Phaser architecture
- Achieve minimum 90% test coverage

## Folder Structure Requirements

```
/docs/           # All documentation in markdown
/plan/           # Project plans and tasks in markdown
  ├── plan.md    # Main project plan
  ├── task-01.md # Individual tasks (with TDD requirements)
  └── task-xx.md # More tasks as needed
/tests/          # All testing code and specifications
  ├── unit/      # Jest unit tests
  ├── e2e/       # Playwright E2E tests
  ├── fixtures/  # Test data and mocks
  └── utils/     # Testing utilities
```